@model Forum
@{
	ViewBag.Title = ViewData.WriteIf("IsEdit", S("Edit forum"), S("Create a forum"));
}
<ul class="path floatContainer">
	<li class="first">@Html.ActionLinkLocalized("Forums", "List", "Forums")</li>
	<li>@Html.ActionLinkLocalized("Admin", "Dashboard", "Admin")</li>
	<li>@Html.ActionLinkLocalized("Manage forums", "Manage", "Forums")</li>
</ul>
<h1>@ViewBag.Title</h1>
@Html.ValidationSummary("<h3>Please check the following errors:</h3>", new Dictionary<string, object>
	{
		{"Description", S("Description must not be blank.")}
		,{"Name", S("Forum name must not be blank.")}
		,{"ShortName", ""}
		,{"Category.Id", S("Category must not be blank.")}
	}, null)
@{Html.BeginForm(null, null, this.Model == null ? null : new{forum=this.Model.ShortName}, FormMethod.Post, new{@id="forumEditForm"});}
<fieldset>
	<legend>Fill in the fields and submit</legend>
	<div class="formItem floatContainer">
		<label for="name">@T("Name")</label>
		@Html.TextBox("name", null, new{@class="text"})
	</div>
	<div class="formItem floatContainer">
		<label for="category_id">@T("Category")</label>
		@Html.DropDownListDefault("category.id", ViewData.Get<SelectList>("Categories"), "", S("-Select a Category-"))
	</div>
	<div class="formItem textarea">
		<label for="description">@T("Message")</label>
		@Html.TextArea("description")
	</div>
	<div class="formItem buttons">
		<input type="submit" value="Send" />
	</div>
</fieldset>
@{Html.EndForm();}
<script type="text/javascript">
	var submitted = false;
	$(document).ready(function ()
	{
		//prevent multiple posts
		$("form#forumEditForm").submit(function ()
		{
			if (!submitted)
			{
				submitted = true;
				return true;
			}
			else
			{
				return false;
			}
		});
	});
</script>