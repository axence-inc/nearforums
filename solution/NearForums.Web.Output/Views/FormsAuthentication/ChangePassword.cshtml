@{
	ViewBag.Title = "Change Password";
}
@section Head{
    @Html.ScriptjQuery()
}
<ul class="path floatContainer">
    <li class="first">@Html.ActionLink("Forums", "List", "Forums")</li>
</ul>
<h1>@ViewBag.Title</h1>
@Html.ValidationSummary("<h3>Please check the following errors:</h3>", new Dictionary<string, object>(), null)
@using (Html.BeginForm())
{
    <fieldset>
		<legend>Use the form below to change your password</legend>
		if(@ViewBag.IsPasswordReset == false)
		{
		<div class="formItem floatContainer">
            <label for="currentPassword">Current password</label>
            @Html.Password("currentPassword")
        </div>
		}
		<div class="formItem floatContainer">
            <label for="newPassword">New password</label>
            @Html.Password("newPassword")
			<span class="note">New passwords are required to be a minimum of @ViewData["PasswordLength"] characters in length.</span>        
        </div>
		<div class="formItem floatContainer">
            <label for="confirmPassword">Confirm new password:</label>
            @Html.Password("confirmPassword")
        </div>
		<div class="formItem buttons">
            <input type="submit" class="button" value="Change Password" />
        </div>
	</fieldset>	
}
<div id="PasswordChangeSuccess">
</div>
@*<script language="JavaScript" type="text/javascript">
    $(document).ready(function () {
        $("#changePwdForm").submit(function () {
            var f = $("#changePwdForm");
            var url = f.attr("action");
            var formData = f.serialize();
            $.post(url, formData, function (data) {
                $("#PasswordChangeSuccess").html(data);
            });
            return false;
        });
    });
</script>*@ 